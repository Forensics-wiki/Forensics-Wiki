{"version":3,"file":"config.js","sources":["../../src/client/composables/arrayCycle.ts","../../src/client/composables/setup.ts","../../src/client/utils/isFocusingTextControl.ts","../../src/client/utils/isKeyMatched.ts","../../src/client/utils/keyIcons.ts","../../src/client/composables/suggestions.ts","../../src/client/components/SearchBox.ts","../../src/client/components/SearchModal.ts","../../src/client/config.ts"],"sourcesContent":["import type { Ref } from \"vue\";\nimport { computed, ref, watch } from \"vue\";\n\nexport interface ArrayCycle<T> {\n  index: Ref<number>;\n  item: Ref<T>;\n  prev: () => void;\n  next: () => void;\n}\n\nexport const useArrayCycle = <T>(\n  target: Ref<T[]>,\n  preserveIndexWhenChange = false,\n): ArrayCycle<T> => {\n  const index = ref(0);\n  const item = computed(() => target.value[index.value]);\n\n  const prev = (): void => {\n    index.value = index.value > 0 ? index.value - 1 : target.value.length - 1;\n  };\n\n  const next = (): void => {\n    index.value = index.value < target.value.length - 1 ? index.value + 1 : 0;\n  };\n\n  watch(target, () => {\n    if (!preserveIndexWhenChange) index.value = 0;\n  });\n\n  return {\n    index,\n    item,\n    prev,\n    next,\n  };\n};\n","import type { InjectionKey, Ref } from \"vue\";\nimport { provide, ref } from \"vue\";\n\ndeclare const __VUEPRESS_DEV__: boolean;\n\nexport const searchModalSymbol: InjectionKey<Ref<boolean>> = Symbol(\n  __VUEPRESS_DEV__ ? \"search-pro\" : \"\",\n);\n\nexport const setupSearchModal = (): void => {\n  const isActive = ref(false);\n\n  provide(searchModalSymbol, isActive);\n};\n","/**\n * Determines whether the user is currently focusing a text control.\n * In this case, the search plugin shouldn’t hijack any hotkeys because\n * the user might be typing into a text field, using type-ahead search\n * in a `select` element, etc.\n */\nexport const isFocusingTextControl = (target: EventTarget): boolean => {\n  if (!(target instanceof Element)) return false;\n\n  return (\n    document.activeElement === target &&\n    ([\"TEXTAREA\", \"SELECT\", \"INPUT\"].includes(target.tagName) ||\n      target.hasAttribute(\"contenteditable\"))\n  );\n};\n","import { searchProHotKeys } from \"../define.js\";\n\nexport const isKeyMatched = (event: KeyboardEvent): boolean =>\n  searchProHotKeys.some((item) => {\n    const {\n      key,\n      ctrl = false,\n      shift = false,\n      alt = false,\n      meta = false,\n    } = item;\n\n    return (\n      key === event.key &&\n      ctrl === event.ctrlKey &&\n      shift === event.shiftKey &&\n      alt === event.altKey &&\n      meta === event.metaKey\n    );\n  });\n","export const ENTER_KEY_ICON =\n  '<svg width=\"15\" height=\"15\" aria-label=\"Enter key\" role=\"img\"><g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.2\"><path d=\"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3\"></path></g></svg>';\n\nexport const DOWN_KEY_ICON =\n  '<svg width=\"15\" height=\"15\" aria-label=\"Arrow down\" role=\"img\"><g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.2\"><path d=\"M7.5 3.5v8M10.5 8.5l-3 3-3-3\"></path></g></svg>';\n\nexport const UP_KEY_ICON =\n  '<svg width=\"15\" height=\"15\" aria-label=\"Arrow up\" role=\"img\"><g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.2\"><path d=\"M7.5 11.5v-8M10.5 6.5l-3-3-3 3\"></path></g></svg>';\n\nexport const ESC_KEY_ICON =\n  '<svg width=\"15\" height=\"15\" aria-label=\"Escape key\" role=\"img\"><g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.2\"><path d=\"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956\"></path></g></svg>';\n","import { useRouteLocale } from \"@vuepress/client\";\nimport { useDebounceFn } from \"@vueuse/core\";\nimport type { Ref } from \"vue\";\nimport { onMounted, onUnmounted, ref, watch } from \"vue\";\nimport { startsWith } from \"vuepress-shared/client\";\n\nimport { enableAutoSuggestions, searchProOptions } from \"../define.js\";\nimport { useSearchOptions } from \"../helpers/index.js\";\nimport { createSearchWorker } from \"../utils/index.js\";\n\nexport interface SuggestionsRef {\n  suggestions: Ref<string[]>;\n}\n\nexport const useSearchSuggestions = (query: Ref<string>): SuggestionsRef => {\n  const suggestions = ref<string[]>([]);\n\n  if (enableAutoSuggestions) {\n    const searchOptions = useSearchOptions();\n    const routeLocale = useRouteLocale();\n\n    onMounted(() => {\n      const performAutoSuggest = useDebounceFn((queryString: string): void => {\n        if (queryString)\n          void search({\n            type: \"suggest\",\n            query: queryString,\n            locale: routeLocale.value,\n            options: searchOptions,\n          })\n            .then((_suggestions) => {\n              suggestions.value = _suggestions.length\n                ? startsWith(_suggestions[0], queryString) &&\n                  !_suggestions[0].slice(queryString.length).includes(\" \")\n                  ? _suggestions\n                  : [queryString, ..._suggestions]\n                : [];\n            })\n            .catch((err) => {\n              console.error(err);\n            });\n        else suggestions.value = [];\n      }, searchProOptions.suggestDelay);\n\n      const { search, terminate } = createSearchWorker();\n\n      watch([query, routeLocale], () => performAutoSuggest(query.value), {\n        immediate: true,\n      });\n\n      onUnmounted(() => {\n        terminate();\n      });\n    });\n  }\n\n  return {\n    suggestions,\n  };\n};\n","import { useEventListener } from \"@vueuse/core\";\nimport type { VNode } from \"vue\";\nimport { computed, defineComponent, h, inject, onMounted, ref } from \"vue\";\nimport {\n  checkIsIOS,\n  checkIsMacOS,\n  checkIsiPad,\n  useLocaleConfig,\n} from \"vuepress-shared/client\";\n\nimport { SearchIcon } from \"./icons.js\";\nimport { searchModalSymbol } from \"../composables/index.js\";\nimport { searchProHotKeys, searchProLocales } from \"../define.js\";\nimport { isFocusingTextControl, isKeyMatched } from \"../utils/index.js\";\n\nimport \"../styles/search-box.scss\";\n\nconst primaryKey = searchProHotKeys[0];\n\nexport default defineComponent({\n  name: \"SearchBox\",\n\n  setup() {\n    const locale = useLocaleConfig(searchProLocales);\n    const isActive = inject(searchModalSymbol)!;\n    const isMacOS = ref(false);\n\n    const controlKeys = computed(() =>\n      primaryKey\n        ? [\n            (isMacOS.value\n              ? [\"⌃\", \"⇧\", \"⌥\", \"⌘\"]\n              : [\"Ctrl\", \"Shift\", \"Alt\", \"Win\"]\n            ).filter(\n              (_, index) =>\n                primaryKey[([\"ctrl\", \"shift\", \"alt\", \"meta\"] as const)[index]],\n            ),\n            primaryKey.key.toUpperCase(),\n          ]\n        : null,\n    );\n\n    useEventListener(\"keydown\", (event: KeyboardEvent): void => {\n      if (\n        // not active\n        !isActive.value &&\n        // key matches\n        isKeyMatched(event) &&\n        // event does not come from the search box itself or\n        // user isn't focusing (and thus perhaps typing in) a text control\n        !isFocusingTextControl(event.target as EventTarget)\n      ) {\n        event.preventDefault();\n        isActive.value = true;\n      }\n    });\n\n    onMounted(() => {\n      const { userAgent } = navigator;\n\n      isMacOS.value =\n        checkIsMacOS(userAgent) ||\n        checkIsIOS(userAgent) ||\n        checkIsiPad(userAgent);\n    });\n\n    return (): (VNode | null)[] => [\n      h(\n        \"button\",\n        {\n          type: \"button\",\n          class: \"search-pro-button\",\n          role: \"search\",\n          \"aria-label\": locale.value.search,\n          onClick: () => {\n            isActive.value = true;\n          },\n        },\n        [\n          h(SearchIcon),\n          h(\"div\", { class: \"search-pro-placeholder\" }, locale.value.search),\n          controlKeys.value\n            ? h(\n                \"div\",\n                { class: \"search-pro-key-hints\" },\n                controlKeys.value.map((key) =>\n                  h(\"kbd\", { class: \"search-pro-key\" }, key),\n                ),\n              )\n            : null,\n        ],\n      ),\n    ];\n  },\n});\n","import { useSiteLocaleData } from \"@vuepress/client\";\nimport { onClickOutside, useEventListener, useScrollLock } from \"@vueuse/core\";\nimport type { VNode } from \"vue\";\nimport {\n  defineAsyncComponent,\n  defineComponent,\n  h,\n  inject,\n  nextTick,\n  onMounted,\n  onUnmounted,\n  ref,\n  shallowRef,\n  watch,\n} from \"vue\";\nimport { useIsMobile, useLocaleConfig } from \"vuepress-shared/client\";\n\nimport { SearchLoading } from \"./SearchLoading.js\";\nimport { SearchIcon } from \"./icons.js\";\nimport {\n  searchModalSymbol,\n  useArrayCycle,\n  useSearchSuggestions,\n} from \"../composables/index.js\";\nimport { enableAutoSuggestions, searchProLocales } from \"../define.js\";\nimport {\n  CLOSE_ICON,\n  DOWN_KEY_ICON,\n  ENTER_KEY_ICON,\n  ESC_KEY_ICON,\n  UP_KEY_ICON,\n} from \"../utils/index.js\";\n\nimport \"../styles/search-modal.scss\";\n\nconst SearchResult = defineAsyncComponent({\n  loader: () =>\n    import(\n      /* webpackChunkName: \"search-pro-result\" */ \"vuepress-plugin-search-pro/result\"\n    ),\n  loadingComponent: () => {\n    const localeConfig = useLocaleConfig(searchProLocales);\n\n    return h(SearchLoading, { hint: localeConfig.value.loading });\n  },\n});\n\nexport default defineComponent({\n  name: \"SearchModal\",\n\n  setup() {\n    const isActive = inject(searchModalSymbol)!;\n    const siteLocale = useSiteLocaleData();\n    const isMobile = useIsMobile();\n    const locale = useLocaleConfig(searchProLocales);\n\n    const input = ref(\"\");\n    const { suggestions } = useSearchSuggestions(input);\n    const displaySuggestion = ref(false);\n\n    const {\n      index: activeSuggestionIndex,\n      prev: activePreviousSuggestion,\n      next: activeNextSuggestion,\n    } = useArrayCycle(suggestions);\n\n    const inputElement = shallowRef<HTMLInputElement>();\n    const suggestionsElement = shallowRef<HTMLDivElement>();\n\n    const applySuggestion = (index = activeSuggestionIndex.value): void => {\n      input.value = suggestions.value[index];\n      displaySuggestion.value = false;\n    };\n\n    useEventListener(\"keydown\", (event: KeyboardEvent) => {\n      if (displaySuggestion.value) {\n        if (event.key === \"ArrowUp\") activePreviousSuggestion();\n        else if (event.key === \"ArrowDown\") activeNextSuggestion();\n        else if (event.key === \"Enter\") applySuggestion();\n        else if (event.key === \"Escape\") displaySuggestion.value = false;\n      } else if (event.key === \"Escape\") {\n        isActive.value = false;\n      }\n    });\n\n    onMounted(() => {\n      const isLocked = useScrollLock(document.body);\n\n      watch(isActive, (value) => {\n        isLocked.value = value;\n        if (value)\n          void nextTick().then(() => {\n            inputElement.value?.focus();\n          });\n      });\n\n      onClickOutside(suggestionsElement, () => {\n        displaySuggestion.value = false;\n      });\n\n      onUnmounted(() => {\n        isLocked.value = false;\n      });\n    });\n\n    return (): VNode | null =>\n      isActive.value\n        ? h(\"div\", { class: \"search-pro-modal-wrapper\" }, [\n            h(\"div\", {\n              class: \"search-pro-mask\",\n              onClick: () => {\n                isActive.value = false;\n                input.value = \"\";\n              },\n            }),\n            h(\"div\", { class: \"search-pro-modal\" }, [\n              h(\"div\", { class: \"search-pro-box\" }, [\n                h(\"form\", [\n                  h(\n                    \"label\",\n                    { for: \"search-pro\", \"aria-label\": locale.value.search },\n                    h(SearchIcon),\n                  ),\n                  h(\"input\", {\n                    ref: inputElement,\n                    type: \"search\",\n                    class: \"search-pro-input\",\n                    id: \"search-pro\",\n                    placeholder: locale.value.placeholder,\n                    spellcheck: \"false\",\n                    autocapitalize: \"off\",\n                    autocomplete: \"off\",\n                    autocorrect: \"off\",\n                    name: `${siteLocale.value.title}-search`,\n                    value: input.value,\n                    \"aria-controls\": \"search-pro-results\",\n                    onKeydown: (event: KeyboardEvent): void => {\n                      const { key } = event;\n\n                      if (suggestions.value.length)\n                        if (key === \"Tab\") {\n                          applySuggestion();\n                          event.preventDefault();\n                        } else if (\n                          key === \"ArrowDown\" ||\n                          key === \"ArrowUp\" ||\n                          key === \"Escape\"\n                        ) {\n                          event.preventDefault();\n                        }\n                    },\n                    onInput: ({ target }: InputEvent) => {\n                      input.value = (<HTMLInputElement>target).value;\n                      displaySuggestion.value = true;\n                      activeSuggestionIndex.value = 0;\n                    },\n                  }),\n                  input.value\n                    ? h(\"button\", {\n                        type: \"reset\",\n                        class: \"search-pro-clear-button\",\n                        innerHTML: CLOSE_ICON,\n                        onClick: () => {\n                          input.value = \"\";\n                        },\n                      })\n                    : null,\n                  enableAutoSuggestions &&\n                  displaySuggestion.value &&\n                  suggestions.value.length\n                    ? h(\n                        \"ul\",\n                        {\n                          class: \"search-pro-suggestions\",\n                          ref: suggestionsElement,\n                        },\n                        suggestions.value.map((suggestion, index) =>\n                          h(\n                            \"li\",\n                            {\n                              class: [\n                                \"search-pro-suggestion\",\n                                {\n                                  active: index === activeSuggestionIndex.value,\n                                },\n                              ],\n                              onClick: () => {\n                                applySuggestion(index);\n                              },\n                            },\n                            [\n                              h(\n                                \"kbd\",\n                                {\n                                  class: \"search-pro-auto-complete\",\n                                  title: `Tab ${locale.value.autocomplete}`,\n                                },\n                                \"Tab\",\n                              ),\n                              suggestion,\n                            ],\n                          ),\n                        ),\n                      )\n                    : null,\n                ]),\n                h(\n                  \"button\",\n                  {\n                    type: \"button\",\n                    class: \"search-pro-close-button\",\n                    onClick: () => {\n                      isActive.value = false;\n                      input.value = \"\";\n                    },\n                  },\n                  locale.value.cancel,\n                ),\n              ]),\n\n              h(SearchResult, {\n                query: input.value,\n                isFocusing: !displaySuggestion.value,\n                onClose: () => {\n                  isActive.value = false;\n                },\n                onUpdateQuery: (query: string) => {\n                  input.value = query;\n                },\n              }),\n\n              // key hints should only appears in pc\n              isMobile.value\n                ? null\n                : h(\"div\", { class: \"search-pro-hints\" }, [\n                    h(\"span\", { class: \"search-pro-hint\" }, [\n                      h(\"kbd\", { innerHTML: ENTER_KEY_ICON }),\n                      locale.value.select,\n                    ]),\n                    h(\"span\", { class: \"search-pro-hint\" }, [\n                      h(\"kbd\", { innerHTML: UP_KEY_ICON }),\n                      h(\"kbd\", { innerHTML: DOWN_KEY_ICON }),\n                      locale.value.navigate,\n                    ]),\n                    h(\"span\", { class: \"search-pro-hint\" }, [\n                      h(\"kbd\", { innerHTML: ESC_KEY_ICON }),\n                      locale.value.exit,\n                    ]),\n                  ]),\n            ]),\n          ])\n        : null;\n  },\n});\n","import { defineClientConfig } from \"@vuepress/client\";\n\nimport SearchBox from \"./components/SearchBox.js\";\nimport SearchModal from \"./components/SearchModal.js\";\nimport { setupSearchModal } from \"./composables/index.js\";\nimport { injectSearchConfig } from \"./helpers/index.js\";\n\nexport default defineClientConfig({\n  enhance({ app }) {\n    injectSearchConfig(app);\n    app.component(\"SearchBox\", SearchBox);\n  },\n  setup() {\n    setupSearchModal();\n  },\n  rootComponents: [SearchModal],\n});\n"],"names":["useArrayCycle","target","preserveIndexWhenChange","index","ref","item","computed","prev","next","watch","searchModalSymbol","setupSearchModal","isActive","provide","isFocusingTextControl","isKeyMatched","event","searchProHotKeys","key","ctrl","shift","alt","meta","ENTER_KEY_ICON","DOWN_KEY_ICON","UP_KEY_ICON","ESC_KEY_ICON","useSearchSuggestions","query","suggestions","enableAutoSuggestions","searchOptions","useSearchOptions","routeLocale","useRouteLocale","onMounted","performAutoSuggest","useDebounceFn","queryString","search","_suggestions","startsWith","err","searchProOptions","terminate","createSearchWorker","onUnmounted","primaryKey","defineComponent","locale","useLocaleConfig","searchProLocales","inject","isMacOS","controlKeys","_","useEventListener","userAgent","checkIsMacOS","checkIsIOS","checkIsiPad","h","SearchIcon","SearchResult","defineAsyncComponent","localeConfig","SearchLoading","siteLocale","useSiteLocaleData","isMobile","useIsMobile","input","displaySuggestion","activeSuggestionIndex","activePreviousSuggestion","activeNextSuggestion","inputElement","shallowRef","suggestionsElement","applySuggestion","isLocked","useScrollLock","value","nextTick","_a","onClickOutside","CLOSE_ICON","suggestion","config","defineClientConfig","app","injectSearchConfig","SearchBox","SearchModal"],"mappings":"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"}