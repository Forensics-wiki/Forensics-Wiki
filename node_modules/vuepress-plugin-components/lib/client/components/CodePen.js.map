{"version":3,"file":"CodePen.js","sources":["../../../src/client/components/CodePen.ts"],"sourcesContent":["import type { CodePenOptions } from \"create-codepen\";\nimport { renderCodePen } from \"create-codepen\";\nimport type { PropType, VNode } from \"vue\";\nimport { computed, defineComponent, h, onMounted } from \"vue\";\n\nimport \"../styles/code-pen.scss\";\n\nexport default defineComponent({\n  name: \"CodePen\",\n\n  props: {\n    /**\n     * CodePen link\n     *\n     * CodePen 链接\n     */\n    link: { type: String, default: \"\" },\n\n    /**\n     * CodePen username\n     *\n     * CodePen 用户名\n     */\n    user: { type: String, default: \"\" },\n\n    /**\n     * CodePen hash\n     *\n     * CodePen hash\n     */\n    slugHash: { type: String, default: \"\" },\n\n    /**\n     * CodePen title\n     *\n     * CodePen 标题\n     */\n    title: { type: String, default: \"\" },\n\n    /**\n     * CodePen height\n     *\n     * CodePen 高度\n     */\n    height: {\n      type: [String, Number],\n      default: 380,\n    },\n\n    /**\n     * CodePen theme\n     *\n     * CodePen 主题\n     */\n    theme: {\n      type: String as PropType<\"default\" | \"light\" | \"dark\">,\n      default: \"default\",\n    },\n\n    /**\n     * CodePen default tab\n     *\n     * CodePen 默认标签\n     */\n    defaultTab: {\n      type: Array as PropType<string[]>,\n      default: () => [\"result\"],\n    },\n\n    /**\n     * CodePen loading status\n     *\n     * CodePen 加载状态\n     */\n    status: {\n      type: String as PropType<\"autoload\" | \"preview\" | \"clicktorun\">,\n      default: \"preview\",\n    },\n  },\n\n  setup(props) {\n    const getInfo = (): {\n      user: string | undefined;\n      slugHash: string | undefined;\n    } => {\n      const result =\n        /(?:^(?:https?:)?\\/\\/codepen.io\\/|^\\/|^)(.*?)\\/(?:pen|embed)\\/(.*?)\\/?$/.exec(\n          props.link,\n        );\n\n      return {\n        user: result?.[1],\n        slugHash: result?.[2],\n      };\n    };\n\n    const user = computed(() => getInfo().user || props.user);\n\n    const slugHash = computed(() => getInfo().slugHash || props.slugHash);\n\n    const options = computed(\n      () =>\n        <CodePenOptions>{\n          user: user.value,\n          \"slug-hash\": slugHash.value,\n          \"theme-id\": props.theme,\n          \"default-tab\": props.defaultTab.join(\",\"),\n          \"pen-title\": props.title,\n          height: props.height,\n          preview: props.status === \"preview\" ? \"true\" : \"\",\n        },\n    );\n\n    onMounted(() => {\n      if (props.status !== \"clicktorun\")\n        renderCodePen(options.value, `.codepen-${slugHash.value}`);\n    });\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\"codepen-wrapper\", `codepen-${slugHash.value}`],\n        },\n        [\n          props.status === \"clicktorun\"\n            ? h(\n                \"button\",\n                {\n                  type: \"button\",\n                  class: \"codepen-button\",\n                  onClick: () => {\n                    renderCodePen(options.value, `.codepen-${slugHash.value}`);\n                  },\n                },\n                \"Run Code\",\n              )\n            : null,\n          h(\"span\", [\n            \"See the Pen \",\n            h(\"a\", { href: props.link }, [props.title]),\n            \" by \",\n            h(\"a\", { href: `https://codepen.io/${user.value}` }, [user.value]),\n            \" on \",\n            h(\"a\", { href: `https://codepen.io` }, [\"CodePen\"]),\n            \".\",\n          ]),\n        ],\n      );\n  },\n});\n"],"names":["defineComponent","props","getInfo","result","user","computed","slugHash","options","onMounted","renderCodePen","h"],"mappings":"yJAOA,IAAeA,EAAAA,EAAgB,CAC7B,KAAM,UAEN,MAAO,CAML,KAAM,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOlC,KAAM,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOlC,SAAU,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOtC,MAAO,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOnC,OAAQ,CACN,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,GACX,EAOA,MAAO,CACL,KAAM,OACN,QAAS,SACX,EAOA,WAAY,CACV,KAAM,MACN,QAAS,IAAM,CAAC,QAAQ,CAC1B,EAOA,OAAQ,CACN,KAAM,OACN,QAAS,SACX,CACF,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAU,IAGX,CACH,MAAMC,EACJ,yEAAyE,KACvEF,EAAM,IACR,EAEF,MAAO,CACL,KAAME,GAAA,KAAA,OAAAA,EAAS,CAAA,EACf,SAAUA,GAAA,KAAAA,OAAAA,EAAS,CACrB,CAAA,CACF,EAEMC,EAAOC,EAAS,IAAMH,EAAAA,EAAU,MAAQD,EAAM,IAAI,EAElDK,EAAWD,EAAS,IAAMH,IAAU,UAAYD,EAAM,QAAQ,EAE9DM,EAAUF,EACd,KACkB,CACd,KAAMD,EAAK,MACX,YAAaE,EAAS,MACtB,WAAYL,EAAM,MAClB,cAAeA,EAAM,WAAW,KAAK,GAAG,EACxC,YAAaA,EAAM,MACnB,OAAQA,EAAM,OACd,QAASA,EAAM,SAAW,UAAY,OAAS,EACjD,EACJ,EAEA,OAAAO,EAAU,IAAM,CACVP,EAAM,SAAW,cACnBQ,EAAcF,EAAQ,MAAO,YAAYD,EAAS,KAAK,EAAE,CAC7D,CAAC,EAEM,IACLI,EACE,MACA,CACE,MAAO,CAAC,kBAAmB,WAAWJ,EAAS,KAAK,EAAE,CACxD,EACA,CACEL,EAAM,SAAW,aACbS,EACE,SACA,CACE,KAAM,SACN,MAAO,iBACP,QAAS,IAAM,CACbD,EAAcF,EAAQ,MAAO,YAAYD,EAAS,KAAK,EAAE,CAC3D,CACF,EACA,UACF,EACA,KACJI,EAAE,OAAQ,CACR,eACAA,EAAE,IAAK,CAAE,KAAMT,EAAM,IAAK,EAAG,CAACA,EAAM,KAAK,CAAC,EAC1C,OACAS,EAAE,IAAK,CAAE,KAAM,sBAAsBN,EAAK,KAAK,EAAG,EAAG,CAACA,EAAK,KAAK,CAAC,EACjE,OACAM,EAAE,IAAK,CAAE,KAAM,oBAAqB,EAAG,CAAC,SAAS,CAAC,EAClD,GACF,CAAC,CACH,CACF,CACJ,CACF,CAAC"}