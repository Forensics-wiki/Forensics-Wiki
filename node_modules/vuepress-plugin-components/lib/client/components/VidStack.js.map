{"version":3,"file":"VidStack.js","sources":["../../../src/client/components/VidStack.ts"],"sourcesContent":["import { useStyleTag } from \"@vueuse/core\";\nimport { defineCustomElements } from \"vidstack/elements\";\nimport type { PropType, VNode } from \"vue\";\nimport { defineComponent, h, onMounted } from \"vue\";\nimport { isPlainObject } from \"vuepress-shared/client\";\n\n// import \"vidstack/styles/defaults.css\";\n// import \"vidstack/styles/community-skin/audio.css\";\n// import \"vidstack/styles/community-skin/video.css\";\nimport \"../styles/vidstack.scss\";\n\nexport interface VidStackSource {\n  src: string;\n  type: string;\n}\n\nexport interface VidStackTrack {\n  /**\n   * Track source URL.\n   */\n  src: string;\n\n  /**\n   * The language of the text track data. It must be a valid BCP 47 language tag.\n   */\n  srclang: string;\n\n  /**\n   * If true, this track will be enabled by default.\n   *\n   * @default false\n   */\n  default?: boolean;\n\n  /**\n   * A string which uniquely identifies the track within the media.\n   */\n  id?: string;\n\n  /**\n   * A human-readable label for the track, or an empty string if unknown.\n   *\n   * @default ''\n   */\n  label?: string;\n\n  /**\n   * A string specifying the category into which the track falls. For example, the main audio\n   * track would have a kind of \"main\".\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/AudioTrack/kind}\n   */\n  kind: string;\n}\n\nexport default defineComponent({\n  name: \"VidStack\",\n\n  props: {\n    /**\n     * VidStack sources\n     */\n    sources: {\n      type: Array as PropType<(VidStackSource | string)[]>,\n      default: () => [],\n    },\n\n    /**\n     * VidStack tracks\n     */\n    tracks: { type: Array as PropType<VidStackTrack[]>, default: () => [] },\n  },\n\n  setup(props, { attrs }) {\n    // FIXME: Workaround for https://github.com/vuepress/vuepress-next/issues/1349\n    useStyleTag(\n      [\n        \"https://cdn.jsdelivr.net/npm/vidstack@0.6/styles/defaults.css\",\n        \"https://cdn.jsdelivr.net/npm/vidstack@0.6/styles/community-skin/audio.css\",\n        \"https://cdn.jsdelivr.net/npm/vidstack@0.6/styles/community-skin/video.css\",\n      ]\n        .map((url) => `@import url(\"${url}\");`)\n        .join(\"\\n\"),\n      { id: \"vidstack-style\" },\n    );\n\n    onMounted(() => defineCustomElements());\n\n    return (): VNode =>\n      h(\n        \"media-player\",\n        {\n          crossorigin: \"\",\n          ...attrs,\n        },\n        [\n          h(\"media-outlet\", [\n            props.sources.map((source) =>\n              isPlainObject(source)\n                ? h(\"source\", { src: source.src, type: source.type })\n                : h(\"source\", source),\n            ),\n            h(\"media-gesture\", { event: \"pointerup\", action: \"toggle:paused\" }),\n            h(\"media-gesture\", {\n              event: \"dblclick\",\n              action: \"toggle:fullscreen\",\n            }),\n            attrs[\"poster\"]\n              ? h(\"media-poster\", { alt: attrs[\"alt\"] || attrs[\"title\"] })\n              : null,\n            props.tracks.map(\n              ({ src, label, srclang, kind, default: isDefault }) =>\n                h(\"track\", { src, label, srclang, kind, default: isDefault }),\n            ),\n          ]),\n          h(\"media-community-skin\"),\n        ],\n      );\n  },\n});\n"],"names":["VidStack","defineComponent","props","attrs","useStyleTag","url","onMounted","defineCustomElements","h","source","isPlainObject","src","label","srclang","kind","isDefault"],"mappings":"uPAuDA,IAAAA,EAAeC,EAAgB,CAC7B,KAAM,WAEN,MAAO,CAIL,QAAS,CACP,KAAM,MACN,QAAS,IAAM,CACjB,CAAA,EAKA,OAAQ,CAAE,KAAM,MAAoC,QAAS,IAAM,CAAA,CAAG,CACxE,EAEA,MAAMC,EAAO,CAAE,MAAAC,CAAM,EAAG,CAEtB,OAAAC,EACE,CACE,gEACA,4EACA,2EACF,EACG,IAAKC,GAAQ,gBAAgBA,CAAG,KAAK,EACrC,KAAK;AAAA,CAAI,EACZ,CAAE,GAAI,gBAAiB,CACzB,EAEAC,EAAU,IAAMC,GAAsB,EAE/B,IACLC,EACE,eACA,CACE,YAAa,GACb,GAAGL,CACL,EACA,CACEK,EAAE,eAAgB,CAChBN,EAAM,QAAQ,IAAKO,GACjBC,EAAcD,CAAM,EAChBD,EAAE,SAAU,CAAE,IAAKC,EAAO,IAAK,KAAMA,EAAO,IAAK,CAAC,EAClDD,EAAE,SAAUC,CAAM,CACxB,EACAD,EAAE,gBAAiB,CAAE,MAAO,YAAa,OAAQ,eAAgB,CAAC,EAClEA,EAAE,gBAAiB,CACjB,MAAO,WACP,OAAQ,mBACV,CAAC,EACDL,EAAM,OACFK,EAAE,eAAgB,CAAE,IAAKL,EAAM,KAAUA,EAAM,KAAS,CAAC,EACzD,KACJD,EAAM,OAAO,IACX,CAAC,CAAE,IAAAS,EAAK,MAAAC,EAAO,QAAAC,EAAS,KAAAC,EAAM,QAASC,CAAU,IAC/CP,EAAE,QAAS,CAAE,IAAAG,EAAK,MAAAC,EAAO,QAAAC,EAAS,KAAAC,EAAM,QAASC,CAAU,CAAC,CAChE,CACF,CAAC,EACDP,EAAE,sBAAsB,CAC1B,CACF,CACJ,CACF,CAAC"}